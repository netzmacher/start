
window.bioEp={bgEl:{},popupEl:{},closeBtnEl:{},shown:false,overflowDefault:"visible",transformDefault:"",width:400,height:220,html:"",css:"",fonts:[],delay:5,showOnDelay:false,cookieExp:30,showOncePerSession:false,onPopup:null,cookieManager:{create:function(d,e,f,b){var a="";if(b){a="; expires=0"}else{if(f){var c=new Date();c.setTime(c.getTime()+(f*24*60*60*1000));a="; expires="+c.toGMTString()}}document.cookie=d+"="+e+a+"; path=/"},get:function(b){var e=b+"=";var a=document.cookie.split(";");for(var d=0;d<a.length;d++){var f=a[d];while(f.charAt(0)==" "){f=f.substring(1,f.length)}if(f.indexOf(e)===0){return f.substring(e.length,f.length)}}return null},erase:function(a){this.create(a,"",-1)}},checkCookie:function(){if(this.cookieExp<=0){if(this.showOncePerSession&&this.cookieManager.get("bioep_shown_session")=="true"){return true}this.cookieManager.erase("bioep_shown");return false}if(this.cookieManager.get("bioep_shown")=="true"){return true}return false},addCSS:function(){for(var c=0;c<this.fonts.length;c++){var a=document.createElement("link");a.href=this.fonts[c];a.type="text/css";a.rel="stylesheet";document.head.appendChild(a)}var b=document.createTextNode(this.css);var d=document.createElement("style");d.type="text/css";d.appendChild(b);document.head.insertBefore(d,document.getElementsByTagName("style")[0])},addPopup:function(){if(document.getElementById("bio_ep_bg")){this.bgEl=document.getElementById("bio_ep_bg")}else{this.bgEl=document.createElement("div");this.bgEl.id="bio_ep_bg";document.body.appendChild(this.bgEl)}if(document.getElementById("bio_ep")){this.popupEl=document.getElementById("bio_ep")}else{this.popupEl=document.createElement("div");this.popupEl.id="bio_ep";this.popupEl.innerHTML=this.html;document.body.appendChild(this.popupEl)}if(document.getElementById("bio_ep_close")){this.closeBtnEl=document.getElementById("bio_ep_close")}else{this.closeBtnEl=document.createElement("div");this.closeBtnEl.id="bio_ep_close";this.closeBtnEl.appendChild(document.createTextNode("X"));this.popupEl.insertBefore(this.closeBtnEl,this.popupEl.firstChild)}},showPopup:function(){if(this.shown){return}this.bgEl.style.display="block";this.popupEl.style.display="block";this.bgEl.style.visibility="visible";this.popupEl.style.visibility="visible";this.shown=true;this.cookieManager.create("bioep_shown","true",this.cookieExp,false);this.cookieManager.create("bioep_shown_session","true",0,true);if(typeof this.onPopup==="function"){this.onPopup()}},hidePopup:function(){this.bgEl.style.display="none";this.popupEl.style.display="none"},scalePopup:function(){var f={width:40,height:40};var e={width:bioEp.popupEl.offsetWidth,height:bioEp.popupEl.offsetHeight};var b={width:window.innerWidth,height:window.innerHeight};var a={width:0,height:0};var d=e.width/e.height;if(e.width>(b.width-f.width)){a.width=b.width-f.width;a.height=a.width/d;if(a.height>(b.height-f.height)){a.height=b.height-f.height;a.width=a.height*d}}if(a.height===0){if(e.height>(b.height-f.height)){a.height=b.height-f.height;a.width=a.height*d}}var c=a.width/e.width;if(c<=0||c>1){c=1}if(this.transformDefault===""){this.transformDefault=window.getComputedStyle(this.popupEl,null).getPropertyValue("transform")}this.popupEl.style.transform=this.transformDefault+" scale("+c+")"},addEvent:function(b,a,c){if(b.addEventListener){b.addEventListener(a,c,false)}else{if(b.attachEvent){b.attachEvent("on"+a,c)}}},loadEvents:function(){this.addEvent(document,"mouseout",function(b){b=b?b:window.event;if(b.target.tagName.toLowerCase()=="input"){return}var a=Math.max(document.documentElement.clientWidth,window.innerWidth||0);if(b.clientX>=(a-50)){return}if(b.clientY>=50){return}var c=b.relatedTarget||b.toElement;if(!c){bioEp.showPopup()}}.bind(this));this.addEvent(this.closeBtnEl,"click",function(){bioEp.hidePopup()})},setOptions:function(a){this.width=(typeof a.width==="undefined")?this.width:a.width;this.height=(typeof a.height==="undefined")?this.height:a.height;this.html=(typeof a.html==="undefined")?this.html:a.html;this.css=(typeof a.css==="undefined")?this.css:a.css;this.fonts=(typeof a.fonts==="undefined")?this.fonts:a.fonts;this.delay=(typeof a.delay==="undefined")?this.delay:a.delay;this.showOnDelay=(typeof a.showOnDelay==="undefined")?this.showOnDelay:a.showOnDelay;this.cookieExp=(typeof a.cookieExp==="undefined")?this.cookieExp:a.cookieExp;this.showOncePerSession=(typeof a.showOncePerSession==="undefined")?this.showOncePerSession:a.showOncePerSession;this.onPopup=(typeof a.onPopup==="undefined")?this.onPopup:a.onPopup},domReady:function(a){(document.readyState==="interactive"||document.readyState==="complete")?a():this.addEvent(document,"DOMContentLoaded",a)},init:function(a){if(typeof a!=="undefined"){this.setOptions(a)}this.addCSS();this.domReady(function(){if(bioEp.checkCookie()){return}bioEp.addPopup();setTimeout(function(){bioEp.loadEvents();if(bioEp.showOnDelay){bioEp.showPopup()}},bioEp.delay*1000)})}};